<!doctype html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" />
    <meta name="renderer" content="webkit" />
    <meta name="force-rendering" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" href="../css/mdui.min.css" />
    <title>Super12138工具箱 - 一个好用的开源的工具箱</title>
</head>

<body
    class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-indigo mdui-theme-accent-pink mdui-theme-layout-auto mdui-loaded">
    <header class="appbar mdui-appbar mdui-appbar-fixed">
        <div class="mdui-toolbar mdui-color-theme">
            <span class="mdui-btn mdui-btn-icon mdui-ripple mdui-ripple-white"
                mdui-drawer="{target: '#main-drawer', swipe: true}">
                <i class="mdui-icon material-icons">&#xe5d2;</i>
            </span>
            <a href="/" class="mdui-typo-headline mdui-hidden-xs">Super12138工具箱</a>
            <a href="/" class="mdui-typo-title">计算器</a>
            <div class="mdui-toolbar-spacer"></div>
        </div>
    </header>
    <div class="mdui-drawer" id="main-drawer">
        <div class="mdui-list" mdui-collapse="{accordion: true}" style="margin-bottom: 76px;">
            <div class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">&#xe88a;</i>
                    <a href="/" class="mdui-list-item-content">首页</a>
                </div>
            </div>
            <div class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">&#xe869;</i>
                    <div class="mdui-list-item-content">工具</div>
                    <i class="mdui-collapse-item-arrow mdui-icon material-icons">&#xe313;</i>
                </div>
                <div class="mdui-collapse-item-body mdui-list">
                    <a href="/tools/all" class="mdui-list-item mdui-ripple">全部工具</a>
                </div>
            </div>
            <div class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <i class="mdui-list-item-icon mdui-icon material-icons">&#xe88e;</i>
                    <a href="/about" class="mdui-list-item-content">关于</a>
                </div>
            </div>
        </div>
    </div>
    <div class="mdui-container mdui-typo">
        <div class="mdui-textfield">
            <input class="mdui-textfield-input" type="text" id="result" onfocus="this.flur();">
        </div>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(1)">1</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(2)">2</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(3)">3</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(4)">4</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(5)">5</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(6)">6</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(7)">7</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(8)">8</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(9)">9</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="command(0)">0</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="dzero()">00</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="op('+')">+</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="op('-')">-</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="op('*')">×</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="op('/')">÷</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="equal()">=</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="del()">←</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="clearzero()">C</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="dot()">.</button>
        <button class="mdui-btn mdui-btn-raised mdui-ripple" onclick="getPercent('%')">%</button>
        <h3>使用说明：</h3>
    </div>
    <script>
        var resultDom = document.getElementById("result");
        var dotFlag = true;
        var opFlag = true;
        var equFlag = true;
        function command(num) {
            if (!equFlag) {
                resultDom.value = "0";
                equFlag = true;
            }
            opFlag = true;
            var str = resultDom.value;
            str = (str == "0" ? "" : str);
            resultDom.value = str + num;
        };

        //+ - * /
        function op(op) {
            if (opFlag) {
                resultDom.value += op;
                dotFlag = true;
                opFlag = false;
                equFlag = true;
            }
        };

        //小数点
        function dot() {
            if (dotFlag) {
                //拿到文本框的值
                var num = resultDom.value;
                resultDom.value = num + ".";
                dotFlag = false;
            }
        }
        //运算
        function equal() {
            var num = resultDom.value;
            resultDom.value = eval(num);
            var r = resultDom.value;
            dotFlag = (r.indexOf(".") == -1 ? true : false);
            opFlag = true;
            equFlag = false;
        }
        function dzero() {
            var num = resultDom.value;//获取文本框的值
            if (num == "0") {
                return;//如果等返回000
            }
            var str = resultDom.value;
            resultDom.value = str + "00";
        };

        //清空
        function clearzero() {
            resultDom.value = "0";
            opFlag = true;
            dotFlag = true;
        }

        //后退
        function del() {
            var val = resultDom.value;
            if (!val) { return; }
            var str = val.substring(0, val.length - 1);
            if (str && /[\.|\+|\-|\*|\/|\%]$/.test(str)) {
                resultDom.value = str.replace(/[\.|\+|\-|\*|\/|\%]$/, "") || 0;
                dotFlag = true;//小数点锁打开
            } else {
                resultDom.value = str || 0;
            }
        }

        //百分号
        function getPercent(num) {
            var val = resultDom.value;
            var add = val.indexOf("+");
            var sub = val.indexOf("-");
            var mul = val.indexOf("*");
            var divide = val.indexOf("/");
            var max = Math.max(add, sub, mul, divide);
            var lastStr = val.substring(max + 1, val.length);
            var beforeStr = val.substring(0, max + 1);
            var percent = lastStr / 100;
            resultDom.value = beforeStr + percent;
        }
    </script>
    <script src="../js/mdui.min.js"></script>
</body>

</html>